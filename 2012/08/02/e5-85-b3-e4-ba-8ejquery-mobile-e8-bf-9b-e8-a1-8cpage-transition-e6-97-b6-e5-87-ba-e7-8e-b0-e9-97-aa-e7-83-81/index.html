<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="在做项目的时候遇到此前没有遇到的事情，就是引入jQuery Mobile的时候出现了闪烁的情况。这个问题在我半年前处理其他项目的时候并不出现，而且最近大部分时间我都在用模拟器去调试，因此也不太察觉。不过既然问题出现了，那么就必须要解决，不要过夜。
具体问题呈现：
当我们使用茅点a，从页面A链接到页面B的时候，jQuery Mobile会自动地帮忙进行一次page transition的动画。默认情">
<meta property="og:type" content="article">
<meta property="og:title" content="关于jQuery Mobile进行Page Transition时出现闪烁">
<meta property="og:url" content="http://yoursite.com/2012/08/02/e5-85-b3-e4-ba-8ejquery-mobile-e8-bf-9b-e8-a1-8cpage-transition-e6-97-b6-e5-87-ba-e7-8e-b0-e9-97-aa-e7-83-81/index.html">
<meta property="og:site_name" content="Casual & Fellow">
<meta property="og:description" content="在做项目的时候遇到此前没有遇到的事情，就是引入jQuery Mobile的时候出现了闪烁的情况。这个问题在我半年前处理其他项目的时候并不出现，而且最近大部分时间我都在用模拟器去调试，因此也不太察觉。不过既然问题出现了，那么就必须要解决，不要过夜。
具体问题呈现：
当我们使用茅点a，从页面A链接到页面B的时候，jQuery Mobile会自动地帮忙进行一次page transition的动画。默认情">
<meta property="og:updated_time" content="2016-11-30T01:06:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于jQuery Mobile进行Page Transition时出现闪烁">
<meta name="twitter:description" content="在做项目的时候遇到此前没有遇到的事情，就是引入jQuery Mobile的时候出现了闪烁的情况。这个问题在我半年前处理其他项目的时候并不出现，而且最近大部分时间我都在用模拟器去调试，因此也不太察觉。不过既然问题出现了，那么就必须要解决，不要过夜。
具体问题呈现：
当我们使用茅点a，从页面A链接到页面B的时候，jQuery Mobile会自动地帮忙进行一次page transition的动画。默认情">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2012/08/02/e5-85-b3-e4-ba-8ejquery-mobile-e8-bf-9b-e8-a1-8cpage-transition-e6-97-b6-e5-87-ba-e7-8e-b0-e9-97-aa-e7-83-81/"/>





  <title> 关于jQuery Mobile进行Page Transition时出现闪烁 | Casual & Fellow </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Casual & Fellow</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Cash is King :-)</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2012/08/02/e5-85-b3-e4-ba-8ejquery-mobile-e8-bf-9b-e8-a1-8cpage-transition-e6-97-b6-e5-87-ba-e7-8e-b0-e9-97-aa-e7-83-81/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Cash">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Casual & Fellow">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Casual & Fellow" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                关于jQuery Mobile进行Page Transition时出现闪烁
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2012-08-02T23:47:15+08:00">
                2012-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>在做项目的时候遇到此前没有遇到的事情，就是引入jQuery Mobile的时候出现了闪烁的情况。这个问题在我半年前处理其他项目的时候并不出现，而且最近大部分时间我都在用模拟器去调试，因此也不太察觉。不过既然问题出现了，那么就必须要解决，不要过夜。</p>
<p>具体问题呈现：</p>
<p>当我们使用茅点a，从页面A链接到页面B的时候，jQuery Mobile会自动地帮忙进行一次page transition的动画。默认情况下这个动画默认值是fade。问题就出现这里，在这个动画进行之前，页面会自动引入并闪烁，这个体验非常不好，而且很生硬。我们就要解决这个问题。</p>
<p>问题分析：</p>
<p>既然是页面转换，我们就要分析jQuery Mobile的页面且换机制的做法。一般情况下，目前的Web App的做法就是Single Page App。但是目前我们如果使用的是jQuery Mobile做程序的时候，好处就是希望多页面架构，而且可以帮助我们处理部分的动画效果。这样的好处就是每个View可以直接地在HTML文档下进行分离，方便了代码的管理，而且对于一个长线的应用来说，这样做的好处就是日后维护代码的时候可以更好地管理，而且做到了逻辑，界面渲染的分离。当然我也不反对Single Page App，但是对于一个SPA，在做代码的分离以及维护的时候都很辛苦。最终你喜欢哪个，就要看需求而订下来了。</p>
<p>扯远了，现在再回顾jQuery Mobile的页面引入机制。在多个页面内，进行页面切换，实质上jQuery Mobile也是在但一个页面内进行的。如果你打开浏览器的调试器，观察其HTML代码的变化，实质上在页面内引入了一个新的标签，并载入了新的页面的代码，并执行。对于旧的页面的代码实质上是终止了所有的js，并hide了下去。</p>
<p>按照这么说，我们就可以推断出，出现问题的地方就在于这个新的标签被过早地显示出来了。我们接下来要做的事情就是要防止这个标签被过早地显示出来。</p>
<p>解决问题：</p>
<p>为了解决这个问题呢，我们必须要利用到jQuery Mobile js 还有CSS文件，而且这两个文件必须是开发版本的（就是未压缩的），我们需要修改内部的代码尝试去解决这个问题。而实际上在下载这两个文件之前，我也去了Github，找到了jQuery Mobile的项目，并在内部找issue，而且也上了stackoverflow去看看有没有人遇到类似的问题。答案是有的！这里面我们可能会讨论到几个问题，希望大家不要嫌我说得啰嗦。</p>
<p>首先，我上去stackoverflow的时候，搜索了「jQuery Mobile page transition blinking」就會發先很多人遇到了同样的问题。听到的答案也有以下：</p>
<p>&nbsp;</p>
<p>1，这个是jQuery Mobile的bug，早在以前的版奔上出现过（这个我此前没有发现，不太清楚）</p>
<p>2，修改css文件中ui-page的css代码，这个比较逼近问题根源。但是修改后无效。</p>
<p>3，这个是浏览器的问题。这个答案也比较逼近真相，因为这里发生了一件有趣的事情。一般我们做Web App的时候会尝试在浏览器中进行调试，而调试的过程当中，我们可能希望这个Web App展现得更加逼真，我们就希望其能够在HOME界面上登陆并展示出来。这样做了下来之后我们就发现一个有趣的事情，在浏览器中（也就是没有去掉底部的工具栏）时，Web App的页面转换非常，流畅，但是到了主屏幕中打开的时候，就会发现这个问题出现了。这里就涉及到苹果safari以及应用中Webview的运行机制了。出于安全因素的考虑，第三方开发者只可以用Nitro较早版本UIWebView作为其引擎，这就是iOS版本Chrome浏览器被迫使用较慢的引擎的原因。这里也导致了添加到主屏幕，或者在iPhone App中的WebView中浏览的时候，效率不够在纯浏览器中高。所以js处理机制上面也会出现一定的问题。</p>
<p>针对上面提出的几个答案，最后我是通过一些比较诡异的办法去解决这个诡异的问题的。最初的时候我是希望能够找到那段处理page transition的函数出来，然后通过修改函数的方式进行处理的。其实已经找到了这段函数，但是如果确实要修改的话，的确不那么快，因为这里涉及到几个比较重要的东西。而核心的代码是在2800行左右（因为里面的代码实在凌乱，而且jQuery Mobile的代码量实在庞大，改了一下，最终还是放弃了。）如果你有兴趣的话，你也可以上去参考一下的。</p>
<p>最终我实现的办法是：<br><code>&lt;pre&gt;
《body》
《div class=&quot;special_wrap&quot;》
    《div id=&quot;main_content&quot;》《/div》
《/div》
《script type=&quot;text/javascript&quot;》
   $(&quot;.special_wrap&quot;).show();
   var dis_spe = setTimeout(&quot;display_special_wrap()&quot;, 550);
《/script》
《/body》
&lt;/pre&gt;</code><br>因为我阻止了其因为点击&lt; a &gt;标签后马上显示，做了一定的延时，因此在page transition中，只会有动画出现，而这个闪的诡异问题也即将消失。其实在这篇文章里面并没有说太多技术性，技巧性的东西。只是希望让大家去思考几个问题。</p>
<p>1，在Web App中，实现这些Page Transition的动画一直是个难点，当然这其中浏览器的性能也存在一个瓶颈，如果在当初设计的时候做好架构是一个经验以及技巧，大家可以分享一下大家的做法；<br>2，在开发过程当中，我们可以引用jQuery Mobile去解决这个问题，发现他太大的时候，我们可以在github上面抽出他的核心代码进行引入。当然如果我们希望更轻便的话，我们还可以使用这个小项目<a href="https://github.com/tpryan/CSS-Slide-Transition" target="_blank" rel="external">https://github.com/tpryan/CSS-Slide-Transition</a> 不过至于体验，大家懂的。<br>3，Web App开发还有很长的一段路还走的。我认为在目前开发的过程中很多时候是摸着石头过河，大家都积累好经验吧，而且也只能够期待浏览器的瓶颈慢慢被突破！<br>4，此外，这片文章就是希望其中提及到的问题引导大家发散思维，想想Web App面临的更多问题。如果有建议，随时可以留言！</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2012/07/26/utf-8-e7-89-b9-e6-ae-8a-e7-ac-a6-e5-8f-b7-e9-9b-86-e6-b1-87-e6-80-bb/" rel="next" title="UTF-8特殊符号集汇总">
                <i class="fa fa-chevron-left"></i> UTF-8特殊符号集汇总
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2012/08/05/e5-91-a8-e6-97-a5-e4-b8-8b-e5-8d-88-e5-b0-8f-e5-b0-9d-e8-af-95-e8-a7-a6-e6-91-b8-e5-8f-8d-e9-a6-88/" rel="prev" title="周日下午小尝试-触摸反馈">
                周日下午小尝试-触摸反馈 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Cash" />
          <p class="site-author-name" itemprop="name">Cash</p>
          <p class="site-description motion-element" itemprop="description">I would like now to seriously indifferent room of wonderful.</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cash</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
